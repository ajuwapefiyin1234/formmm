<!DOCTYPE html>
<html>
<head>
<title>Login</title>
<style>
body {
    font-family:sans-serif;
    background:linear-gradient(135deg,#6a11cb,#2575fc);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}
.card {
    background:white;
    padding:2rem;
    border-radius:10px;
    width:350px;
    text-align:center;
}
input, button {
    width:90%;
    padding:10px;
    margin:8px 0;
}
button {
    background:#6a11cb;
    color:white;
    border:none;
    cursor:pointer;
}
button:hover {
    background:#2575fc;
}
.error { color:red; }
</style>
</head>
<body>

<div class="card">
<h2>Login</h2>

<p id="error-message" class="error" style="display:none;"></p>

<form id="login-form">
    <input type="text" id="username" placeholder="Username" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Login</button>
</form>
</div>

<script>
    // Get the saved username and password from localStorage (from signup)
    const savedUsername = localStorage.getItem('saved_user');
    const savedPassword = localStorage.getItem('saved_pass');

    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const errorMessageElement = document.getElementById('error-message');

    // Pre-fill if values exist (optional, for convenience in demo)
    if (savedUsername) {
        usernameInput.value = savedUsername;
    }
    // Note: Never pre-fill passwords in real applications!
    // if (savedPassword) {
    //     passwordInput.value = savedPassword;
    // }

    function showErrorMessage(message) {
        errorMessageElement.innerText = message;
        errorMessageElement.style.display = 'block';
    }

    function hideErrorMessage() {
        errorMessageElement.style.display = 'none';
    }

    document.getElementById('login-form').addEventListener('submit', function(event) {
        event.preventDefault();

        hideErrorMessage();

        const enteredUsername = usernameInput.value.trim();
        const enteredPassword = passwordInput.value.trim();

        // Simulate authentication against locally stored credentials
        if (enteredUsername === savedUsername && enteredPassword === savedPassword) {
            // "Log in" the user by storing their username in a separate key
            localStorage.setItem('logged_in_user', enteredUsername);
            window.location.href = "index2.html"; // Redirect to the welcome page
        } else {
            showErrorMessage("Invalid login details!");
        }
    });

    // Check if already logged in (e.g., user navigated back).
    // If so, redirect directly to welcome page.
    if (localStorage.getItem('logged_in_user')) {
        window.location.href = "index2.html";
    }
</script>

</body>
</html>
