<!DOCTYPE html>
<html>
<head>
<title>Signup</title>
<style>
body {
    font-family: sans-serif;
    background: linear-gradient(135deg,#6a11cb,#2575fc);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
}
.card {
    background:white;
    padding:2rem;
    border-radius:10px;
    width:350px;
    text-align:center;
}
input, button {
    width:90%;
    padding:10px;
    margin:8px 0;
}
button {
    background:#6a11cb;
    color:white;
    border:none;
    cursor:pointer;
}
button:hover {
    background:#2575fc;
}
.captcha-box {
    background:#eee;
    padding:10px;
    letter-spacing:3px;
    font-weight:bold;
    margin-bottom: 8px;
}
.error { color:red; }
</style>
</head>
<body>

<div class="card">
<h2>Create Account</h2>

<p id="error-message" class="error" style="display:none;"></p>

<form id="signup-form">
    <input type="text" id="username" placeholder="Username" required>
    <input type="password" id="password" placeholder="Password" required>

    <div class="captcha-box" id="captcha-display"></div>

    <input type="text" id="captcha-input" placeholder="Enter CAPTCHA" required>

    <button type="submit">Sign Up</button>
</form>
</div>

<script>
    let currentCaptcha = '';

    function generateCaptcha() {
        const characters = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
        let captcha = '';
        for (let i = 0; i < 5; i++) {
            captcha += characters.charAt(Math.floor(Math.random() * characters.length));
        }
        return captcha;
    }

    function displayCaptcha() {
        currentCaptcha = generateCaptcha();
        document.getElementById('captcha-display').innerText = currentCaptcha;
    }

    function showErrorMessage(message) {
        const errorMessageElement = document.getElementById('error-message');
        errorMessageElement.innerText = message;
        errorMessageElement.style.display = 'block';
    }

    function hideErrorMessage() {
        document.getElementById('error-message').style.display = 'none';
    }

    document.getElementById('signup-form').addEventListener('submit', function(event) {
        event.preventDefault();

        hideErrorMessage();

        const username = document.getElementById('username').value.trim();
        const password = document.getElementById('password').value.trim();
        const captchaInput = document.getElementById('captcha-input').value.trim();

        if (captchaInput.toLowerCase() !== currentCaptcha.toLowerCase()) {
            showErrorMessage("Incorrect CAPTCHA!");
            displayCaptcha();
        } else {
            localStorage.setItem('saved_user', username);
            localStorage.setItem('saved_pass', password);

            alert("Signup Successful! Now redirecting to login page.");
            window.location.href = "index2.html"; // Redirect to LOGIN page (index2.html)
        }
    });

    displayCaptcha();
</script>

</body>
</html>
